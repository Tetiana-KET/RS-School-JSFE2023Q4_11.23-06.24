var M=Object.defineProperty;var q=(n,a,e)=>a in n?M(n,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[a]=e;var i=(n,a,e)=>(q(n,typeof a!="symbol"?a+"":a,e),e);(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();function V(n,a,e,t=!0,s=!0,o=!0){const r={firstName:n,surname:a,isLoggedIn:e,pronounceEnabled:t,translateEnabled:s,bgImageHintEnabled:o};localStorage.setItem("userData",JSON.stringify(r))}function T(){const n=localStorage.getItem("userData");return n?JSON.parse(n):null}function B(n,a,e){const t=localStorage.getItem(n),s=t?JSON.parse(t):{};s[a]=e,localStorage.setItem(n,JSON.stringify(s))}function A(n,a){const e=localStorage.getItem(n);return(e?JSON.parse(e):{})[a]}function U(){const n=T();return n?`Welcome, ${n.firstName} ${n.surname}!`:"Welcome!"}function j(){const n=T();return!!(n&&n.isLoggedIn)}async function E(n){return await(await fetch(`https://raw.githubusercontent.com/rolling-scopes-school/rss-puzzle-data/main/data/wordCollectionLevel${n}.json`)).json()}async function P(n,a){const e="https://raw.githubusercontent.com/rolling-scopes-school/rss-puzzle-data/main/";try{const t=a,o=await(await fetch(`${e}${n}`)).arrayBuffer();return await t.decodeAudioData(o)}catch{throw new Error}}async function J(n){const a=`https://raw.githubusercontent.com/rolling-scopes-school/rss-puzzle-data/main/images/${n}`;try{const t=await(await fetch(a)).blob(),s=URL.createObjectURL(t),o=new Image;return o.src=s,await new Promise((r,d)=>{o.onload=()=>r(o),o.onerror=c=>d(c)})}catch{throw new Error}}class l{constructor({tagName:a="div",text:e="",classNames:t=[],children:s=[],attributes:o={}}){i(this,"node");i(this,"children",[]);const r=document.createElement(a);if(t.length&&r.classList.add(...t),Object.keys(o).length)for(const[d,c]of Object.entries(o))typeof c=="boolean"?c?r.setAttribute(d,""):r.removeAttribute(d):r.setAttribute(d,c);r.textContent=e,this.node=r,s&&this.appendChildren(s)}appendChildren(a){a.forEach(e=>{this.append(e)})}append(a){a instanceof l&&(this.children.push(a),this.node.append(a.getNode()))}prepend(a){a instanceof l&&(this.children.push(a),this.node.prepend(a.getNode()))}getNode(){return this.node}getChildren(){return this.children}setTextContent(a){this.node.textContent=a}setAttribute(a,e){this.node.setAttribute(a,e)}removeAttribute(a){this.node.removeAttribute(a)}toggleClass(a){this.node.classList.toggle(a)}destroyChildren(){this.children.forEach(a=>{a.destroy()}),this.children.length=0}destroy(){this.destroyChildren(),this.node.remove()}}const Z="_footer_1ex95_3",K="_footer-container_1ex95_27",Y="_social-items_1ex95_45",Q="_social-item_1ex95_45",X="_developer_1ex95_79",ee="_social-item-link_1ex95_79",te="_rs-icon-wrap_1ex95_97",se="_rsschool-link_1ex95_113",m={footer:Z,"footer-container":"_footer-container_1ex95_27",footerContainer:K,"social-items":"_social-items_1ex95_45",socialItems:Y,"social-item":"_social-item_1ex95_45",socialItem:Q,developer:X,"social-item-link":"_social-item-link_1ex95_79",socialItemLink:ee,"rs-icon-wrap":"_rs-icon-wrap_1ex95_97",rsIconWrap:te,"rsschool-link":"_rsschool-link_1ex95_113",rsschoolLink:se};class F extends l{constructor(){super({tagName:"footer",classNames:[m.footer]}),this.render()}render(){this.node.innerHTML=`
    <div class="${m.footerContainer}">
      <ul class="${m.socialItems} ${m.developer}">
        <li class="${m.socialItem}">
          <a class="${m.socialItemLink}" href="https://github.com/Tetiana-KET" target="_blank">
            Tetiana
          </a>
        </li>
        <li class="${m.socialItem}">
          <a class="${m.socialItemLink}" href="https://github.com/Tetiana-KET" target="_blank">
            <svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="#da90ef" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg>
          </a>
        </li>
      </ul>
      <div class="${m.rsIconWrap} ${m.rsIconWrap}">
        <a href="https://rs.school/" class="${m.socialItem} ${m.rsschoolLink}" target="_blank">
        </a>
      </div>
      <ul class="${m.socialItems} ${m.rsSchool}">
        <li class="${m.socialItem}">
          <a class="${m.socialItemLink}" href="https://github.com/rolling-scopes/rsschool-app" target="_blank">
            <svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="#da90ef" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg>
          </a>
        </li>
        <li class="${m.socialItem}">
          <a class="${m.socialItemLink}" href="https://www.youtube.com/c/rollingscopesschool" target="_blank">
            <svg viewBox="64 64 896 896" focusable="false" data-icon="youtube" width="1em" height="1em" fill="#da90ef" aria-hidden="true"><path d="M941.3 296.1a112.3 112.3 0 00-79.2-79.3C792.2 198 512 198 512 198s-280.2 0-350.1 18.7A112.12 112.12 0 0082.7 296C64 366 64 512 64 512s0 146 18.7 215.9c10.3 38.6 40.7 69 79.2 79.3C231.8 826 512 826 512 826s280.2 0 350.1-18.8c38.6-10.3 68.9-40.7 79.2-79.3C960 658 960 512 960 512s0-146-18.7-215.9zM423 646V378l232 133-232 135z"></path></svg>
          </a>
        </li>
        <li class="${m.socialItem}">
          <a class="${m.socialItemLink}" href="https://discord.com/invite/PRADsJB" target="_blank">
            <svg width="1em" height="1em" fill="#da90ef" viewBox="0 -7 71 71" xmlns="http://www.w3.org/2000/svg"><g><path d="M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527 0.41542C45.5603 0.39851 45.468 0.440769 45.4204 0.525289C44.7963 1.6353 44.105 3.0834 43.6209 4.2216C38.1637 3.4046 32.7345 3.4046 27.3892 4.2216C26.905 3.0581 26.1886 1.6353 25.5617 0.525289C25.5141 0.443589 25.4218 0.40133 25.3294 0.41542C20.2584 1.2888 15.4057 2.8186 10.8776 4.8978C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795C1.57795 18.7309 -0.943561 32.1443 0.293408 45.3914C0.299005 45.4562 0.335386 45.5182 0.385761 45.5576C6.45866 50.0174 12.3413 52.7249 18.1147 54.5195C18.2071 54.5477 18.305 54.5139 18.3638 54.4378C19.7295 52.5728 20.9469 50.6063 21.9907 48.5383C22.0523 48.4172 21.9935 48.2735 21.8676 48.2256C19.9366 47.4931 18.0979 46.6 16.3292 45.5858C16.1893 45.5041 16.1781 45.304 16.3068 45.2082C16.679 44.9293 17.0513 44.6391 17.4067 44.3461C17.471 44.2926 17.5606 44.2813 17.6362 44.3151C29.2558 49.6202 41.8354 49.6202 53.3179 44.3151C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433C53.9057 44.6363 54.2779 44.9293 54.6529 45.2082C54.7816 45.304 54.7732 45.5041 54.6333 45.5858C52.8646 46.6197 51.0259 47.4931 49.0921 48.2228C48.9662 48.2707 48.9102 48.4172 48.9718 48.5383C50.038 50.6034 51.2554 52.5699 52.5959 54.435C52.6519 54.5139 52.7526 54.5477 52.845 54.5195C58.6464 52.7249 64.529 50.0174 70.6019 45.5576C70.6551 45.5182 70.6887 45.459 70.6943 45.3942C72.1747 30.0791 68.2147 16.7757 60.1968 4.9823C60.1772 4.9429 60.1437 4.9147 60.1045 4.8978ZM23.7259 37.3253C20.2276 37.3253 17.3451 34.1136 17.3451 30.1693C17.3451 26.225 20.1717 23.0133 23.7259 23.0133C27.308 23.0133 30.1626 26.2532 30.1066 30.1693C30.1066 34.1136 27.28 37.3253 23.7259 37.3253ZM47.3178 37.3253C43.8196 37.3253 40.9371 34.1136 40.9371 30.1693C40.9371 26.225 43.7636 23.0133 47.3178 23.0133C50.9 23.0133 53.7545 26.2532 53.6986 30.1693C53.6986 34.1136 50.9 37.3253 47.3178 37.3253Z"></path></g></svg>
          </a>
        </li>
      </ul>
    </div>`}}const ne="_header_1xl11_1",ae="_header-container_1xl11_27",ie="_logout-btn_1xl11_45",oe="_header-logo_1xl11_93",re="_user-greeting_1xl11_97",le="_masked_1xl11_1",de="_fadeInDown_1xl11_1",x={header:ne,"header-container":"_header-container_1xl11_27",headerContainer:ae,"logout-btn":"_logout-btn_1xl11_45",logoutBtn:ie,"header-logo":"_header-logo_1xl11_93",headerLogo:oe,"user-greeting":"_user-greeting_1xl11_97",userGreeting:re,masked:le,fadeInDown:de};class $ extends l{constructor(){super({tagName:"header",classNames:[x.header]});i(this,"headerContainer");i(this,"headerLogo");i(this,"userGreeting");i(this,"logoutBtn");this.headerContainer=new l({tagName:"div",classNames:[x.headerContainer]}),this.append(this.headerContainer),this.headerLogo=new l({tagName:"h2",text:"RSS Puzzle",classNames:[x.headerLogo]}),this.headerContainer.append(this.headerLogo),this.userGreeting=new l({tagName:"p",classNames:[x.userGreeting],attributes:{id:"userGreeting"}}),this.userGreeting.setTextContent(`${U()}`),this.setFontSize(),this.headerContainer.append(this.userGreeting),this.logoutBtn=new l({tagName:"button",text:"Log out",classNames:[x.logoutBtn]}),this.headerContainer.append(this.logoutBtn),this.logoutBtn.getNode().addEventListener("click",this.handleLogout.bind(this)),window.addEventListener("resize",()=>{this.setFontSize()})}setFontSize(){const e=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);let t;e<600?t="18px":e<900?t="22px":t="26px",this.userGreeting.getNode().style.fontSize=t}handleLogout(){localStorage.removeItem("userData"),localStorage.setItem("isPlaying","false"),document.body.firstChild&&document.body.removeChild(document.body.firstChild),document.body.prepend(new G().getNode())}}function ce(n,a){A("userData","translateEnabled")?(n.translationWrap.getNode().removeAttribute("data-active"),a.removeAttribute("active-hint"),B("userData","translateEnabled",!1)):(n.translationWrap.getNode().setAttribute("data-active","true"),a.setAttribute("active-hint","true"),n.displayTranslation(),B("userData","translateEnabled",!0))}function ue(n,a){A("userData","pronounceEnabled")?(a.setAttribute("disabled","true"),n.removeAttribute("active-hint"),B("userData","pronounceEnabled",!1)):(a.removeAttribute("disabled"),n.setAttribute("active-hint","true"),B("userData","pronounceEnabled",!0))}function me(n,a){var t,s;A("userData","bgImageHintEnabled")?((t=n.header.getNode().querySelector("#bgImageHint"))==null||t.removeAttribute("data-active"),n.gameWrap.getNode().setAttribute("bg-image-disabled","true"),a.removeAttribute("active-hint"),Array.from(n.gameSourceDataBlock.getNode().children).forEach(o=>{o.setAttribute("bg-image-disabled","true")}),B("userData","bgImageHintEnabled",!1)):(a.setAttribute("active-hint","true"),(s=n.header.getNode().querySelector("#bgImageHint"))==null||s.setAttribute("data-active","true"),n.gameWrap.getNode().removeAttribute("bg-image-disabled"),Array.from(n.gameSourceDataBlock.getNode().children).forEach(o=>{o.removeAttribute("bg-image-disabled")}),B("userData","bgImageHintEnabled",!0))}const ge="_game-header-options_eaykg_1",he="_select-round-option_eaykg_11",pe="_select-level-option_eaykg_13",_e="_select-option-title_eaykg_43",be="_select-round-title_eaykg_45",fe="_select-option-body_eaykg_59",Ne="_select-round-body_eaykg_61",ve="_level-item_eaykg_143",Ie="_round-item_eaykg_145",Ce="_settings__wrap_eaykg_161",ye="_settings__wrap_eaykg_161",ke="_level__body_eaykg_167",Se="_level__body_eaykg_167",Ae="_level__body-active_eaykg_173",Be="_level__value_eaykg_179",we="_level__value_eaykg_179",xe="_select_eaykg_11",N={"game-header-options":"_game-header-options_eaykg_1",gameHeaderOptions:ge,"select-round-option":"_select-round-option_eaykg_11",selectRoundOption:he,"select-level-option":"_select-level-option_eaykg_13",selectLevelOption:pe,"select-option-title":"_select-option-title_eaykg_43",selectOptionTitle:_e,"select-round-title":"_select-round-title_eaykg_45",selectRoundTitle:be,"select-option-body":"_select-option-body_eaykg_59",selectOptionBody:fe,"select-round-body":"_select-round-body_eaykg_61",selectRoundBody:Ne,"level-item":"_level-item_eaykg_143",levelItem:ve,"round-item":"_round-item_eaykg_145",roundItem:Ie,settings__wrap:Ce,settingsWrap:ye,level__body:ke,levelBody:Se,"level__body-active":"_level__body-active_eaykg_173",levelBodyActive:Ae,level__value:Be,levelValue:we,select:xe};class Le extends l{constructor(e){super({tagName:"div",classNames:[N.gameHeaderOptions]});i(this,"gamePageInstance");i(this,"selectLevelOption");i(this,"selectOptionTitle");i(this,"selectOptionBody");i(this,"selectRoundOption");i(this,"selectRoundTitle");i(this,"selectRoundBody");this.gamePageInstance=e,this.selectLevelOption=new l({tagName:"div",classNames:[N.selectLevelOption]}),this.append(this.selectLevelOption),this.selectOptionTitle=new l({tagName:"div",classNames:[N.selectOptionTitle],attributes:{id:"selectLevelTitle"}}),this.selectLevelOption.append(this.selectOptionTitle),this.selectOptionBody=new l({tagName:"div",classNames:[N.selectOptionBody],attributes:{id:"selectLevelBody"}}),this.selectLevelOption.append(this.selectOptionBody),this.createElementsForLevel(),this.selectRoundOption=new l({tagName:"div",classNames:[N.selectRoundOption]}),this.append(this.selectRoundOption),this.selectRoundTitle=new l({tagName:"div",classNames:[N.selectRoundTitle],attributes:{id:"selectRoundTitle"}}),this.selectRoundOption.append(this.selectRoundTitle),this.selectRoundBody=new l({tagName:"div",classNames:[N.selectRoundBody],attributes:{id:"selectRoundBody"}}),this.selectRoundOption.append(this.selectRoundBody),this.setTitleForLevelOption(),this.createElementsForRound(),this.addEventListeners()}createElementsForLevel(){for(let e=1;e<=6;e+=1){const t=document.createElement("div");t.classList.add(`${N.levelItem}`),t.textContent=`Level ${e}`,this.selectOptionBody.getNode().appendChild(t)}}createElementsForRound(){const e=this.gamePageInstance.totalRoundsCount;for(let t=1;t<=e;t+=1){const s=document.createElement("div");s.classList.add(`${N.roundItem}`),s.textContent=`Round ${t}`,this.selectOptionBody.getNode().appendChild(s)}}addEventListeners(){this.handleLevelListener(),this.handleRoundListener()}handleRoundListener(){this.selectRoundOption.getNode().addEventListener("click",e=>{const t=e.target;if(this.selectRoundOption.getNode().hasAttribute("active")?this.selectRoundOption.getNode().removeAttribute("active"):this.selectRoundOption.getNode().setAttribute("active","true"),t.hasAttribute("data-class")&&t.textContent){const s=parseInt(t.textContent.split(" ")[1],10);this.gamePageInstance.currentRound=s-1,this.setTitleForRoundOption(),this.proceedToSelectedRound()}})}handleLevelListener(){this.selectLevelOption.getNode().addEventListener("click",e=>{const t=e.target;if(this.selectLevelOption.getNode().hasAttribute("active")?this.selectLevelOption.getNode().removeAttribute("active"):this.selectLevelOption.getNode().setAttribute("active","true"),t.classList.contains(N.levelItem)&&t.textContent){const s=parseInt(t.textContent.split(" ")[1],10);this.gamePageInstance.currentLevel=s,this.setTitleForLevelOption(),this.proceedToSelectedLevel()}})}proceedToSelectedRound(){this.gamePageInstance.gameWrap.getNode().removeAttribute("bg-revealed"),this.gamePageInstance.gameWrap.getNode().innerHTML="",this.gamePageInstance.addLinesForSentence(),this.gamePageInstance.correctlyAssembledSentences=0,this.gamePageInstance.currentSentenceIndex=0,this.gamePageInstance.sentencesForRound.length=0,this.gamePageInstance.currentSentenceCards.length=0,this.gamePageInstance.guessedSentences.length=0,this.gamePageInstance.autoCompletedSentences.length=0,this.gamePageInstance.handleFetchedData(),this.gamePageInstance.displaySentence(),this.gamePageInstance.getImageForRound(),this.setTitleForRoundOption()}proceedToSelectedLevel(){this.gamePageInstance.gameWrap.getNode().removeAttribute("bg-revealed"),this.gamePageInstance.gameWrap.getNode().innerHTML="",this.gamePageInstance.correctlyAssembledSentences=0,this.gamePageInstance.currentSentenceIndex=0,this.gamePageInstance.currentRound=0,this.gamePageInstance.sentencesForRound.length=0,this.gamePageInstance.currentSentenceCards.length=0,this.gamePageInstance.guessedSentences.length=0,this.gamePageInstance.autoCompletedSentences.length=0,E(this.gamePageInstance.currentLevel).then(e=>{this.gamePageInstance.fetchedWordData=e,this.gamePageInstance.handleFetchedData(),this.gamePageInstance.displaySentence(),this.gamePageInstance.getImageForRound(),this.gamePageInstance.addLinesForSentence(),this.gamePageInstance.createElementsForRound(),this.setTitleForLevelOption()}).catch(e=>{console.error("Error fetching data:",e)})}setTitleForLevelOption(){const e=this.selectOptionTitle.getNode();e.textContent=`Level ${this.gamePageInstance.currentLevel}`}setTitleForRoundOption(){const e=this.selectRoundTitle.getNode();e.textContent=`Round ${this.gamePageInstance.currentRound+1}`}}const We="_game-header-container_1f7on_1",Re="_header-container_1f7on_31",Te="_game-clues-wrap_1f7on_49",Ee="_clue-button_1f7on_59",Pe="_translate-hint_1f7on_81",Fe="_pronunciation-hint_1f7on_91",$e="_play-sound-button_1f7on_101",De="_bg-image-hint_1f7on_111",Oe="_statistic-Btn_1f7on_121",He="_shake_1f7on_1",ze="_select_1f7on_237",_={"game-header-container":"_game-header-container_1f7on_1",gameHeaderContainer:We,"header-container":"_header-container_1f7on_31",headerContainer:Re,"game-clues-wrap":"_game-clues-wrap_1f7on_49",gameCluesWrap:Te,"clue-button":"_clue-button_1f7on_59",clueButton:Ee,"translate-hint":"_translate-hint_1f7on_81",translateHint:Pe,"pronunciation-hint":"_pronunciation-hint_1f7on_91",pronunciationHint:Fe,"play-sound-button":"_play-sound-button_1f7on_101",playSoundButton:$e,"bg-image-hint":"_bg-image-hint_1f7on_111",bgImageHint:De,"statistic-Btn":"_statistic-Btn_1f7on_121",statisticBtn:Oe,shake:He,select:ze};class Ge extends l{constructor(e){super({tagName:"div",classNames:[_.gameHeaderContainer]});i(this,"headerContainer");i(this,"gameHeaderOptions");i(this,"playSoundButton");i(this,"gameCluesWrap");i(this,"gamePageInstance");i(this,"audioContext",new AudioContext);i(this,"audio",null);this.gamePageInstance=e,this.headerContainer=new l({tagName:"div",classNames:[_.headerContainer]}),this.append(this.headerContainer),this.gameHeaderOptions=new Le(this.gamePageInstance),this.headerContainer.append(this.gameHeaderOptions),this.playSoundButton=new l({tagName:"button",classNames:[_.playSoundButton,_.clueButton],attributes:{id:"playSoundButton"}}),this.headerContainer.append(this.playSoundButton),this.playSoundButton.getNode().addEventListener("click",this.handleClick.bind(this)),this.gameCluesWrap=new l({tagName:"div",classNames:[_.gameCluesWrap]}),this.headerContainer.append(this.gameCluesWrap),this.addClueButtons(),this.toggleDefaultSettings(),this.gameCluesWrap.getNode().addEventListener("click",this.handleClick.bind(this))}addClueButtons(){for(let e=1;e<=3;e+=1){const t=document.createElement("button");t.classList.add(_.clueButton),this.gameCluesWrap.getNode().appendChild(t)}this.gameCluesWrap.getNode().children[0].classList.add(`${_.translateHint}`),this.gameCluesWrap.getNode().children[0].setAttribute("id","translateHint"),this.gameCluesWrap.getNode().children[1].classList.add(`${_.pronunciationHint}`),this.gameCluesWrap.getNode().children[1].setAttribute("id","pronunciationHint"),this.gameCluesWrap.getNode().children[2].classList.add(`${_.bgImageHint}`),this.gameCluesWrap.getNode().children[2].setAttribute("id","bgImageHint")}toggleDefaultSettings(){this.gamePageInstance.isTranslateEnabled?this.gameCluesWrap.getNode().children[0].setAttribute("active-hint","true"):this.gamePageInstance.isPronounceEnabled?this.gameCluesWrap.getNode().children[1].setAttribute("active-hint","true"):this.gamePageInstance.isBgImageHintEnabled&&this.gameCluesWrap.getNode().children[2].setAttribute("active-hint","true")}async handleClick(e){const t=e.target;t&&t.classList.contains(`${_.clueButton}`)&&(t.classList.contains(`${_.translateHint}`)&&ce(this.gamePageInstance,t),t.classList.contains(`${_.pronunciationHint}`)&&ue(t,this.playSoundButton),t.classList.contains(`${_.playSoundButton}`)&&(t.setAttribute("active-hint","true"),await this.handlePlayAudio()),t.classList.contains(`${_.bgImageHint}`)&&me(this.gamePageInstance,t))}async getAudio(){var e,t,s;if(this.gamePageInstance.audioExample=(s=(t=(e=this.gamePageInstance.fetchedWordData)==null?void 0:e.rounds[this.gamePageInstance.currentRound])==null?void 0:t.words[this.gamePageInstance.currentSentenceIndex])==null?void 0:s.audioExample,this.gamePageInstance.audioExample)try{this.audio=await P(this.gamePageInstance.audioExample,this.audioContext)}catch(o){console.error("Error fetching audio:",o)}}playAudio(){if(this.audio){this.playSoundButton.setAttribute("isPlaying","true");const e=this.audioContext.createBufferSource();e.buffer=this.audio,e.connect(this.audioContext.destination),e.onended=()=>{this.playSoundButton.removeAttribute("isPlaying")},e.start(this.audioContext.currentTime)}}async handlePlayAudio(){var e,t,s;this.gamePageInstance.audioExample=(s=(t=(e=this.gamePageInstance.fetchedWordData)==null?void 0:e.rounds[this.gamePageInstance.currentRound])==null?void 0:t.words[this.gamePageInstance.currentSentenceIndex])==null?void 0:s.audioExample,await this.getAudio(),this.playAudio()}}const Me="_round-item_18u21_1",qe="_game-page-bg_18u21_17",Ve="_game-page-container_18u21_25",Ue="_game-wrap_18u21_41",je="_game-source-data-block_18u21_43",Je="_main-content-wrapper_18u21_55",Ze="_translation-wrap_18u21_85",Ke="_sentence-line_18u21_173",Ye="_word-card_18u21_215",Qe="_wrong-order_18u21_277",Xe="_selected_18u21_287",et="_page-select-option_18u21_407",h={"round-item":"_round-item_18u21_1",roundItem:Me,"game-page-bg":"_game-page-bg_18u21_17",gamePageBg:qe,"game-page-container":"_game-page-container_18u21_25",gamePageContainer:Ve,"game-wrap":"_game-wrap_18u21_41",gameWrap:Ue,"game-source-data-block":"_game-source-data-block_18u21_43",gameSourceDataBlock:je,"main-content-wrapper":"_main-content-wrapper_18u21_55",mainContentWrapper:Je,"translation-wrap":"_translation-wrap_18u21_85",translationWrap:Ze,"sentence-line":"_sentence-line_18u21_173",sentenceLine:Ke,"word-card":"_word-card_18u21_215",wordCard:Ye,"wrong-order":"_wrong-order_18u21_277",wrongOrder:Qe,selected:Xe,"page-select-option":"_page-select-option_18u21_407",pageSelectOption:et};function tt(n){const a=n.slice();for(let e=a.length-1;e>0;e-=1){const t=Math.floor(Math.random()*(e+1));[a[e],a[t]]=[a[t],a[e]]}return a}function st(n,a,e,t,s,o){const r=n.split(" "),d=[],c=document.querySelector(`.${a}`);let b=0,p=0;c&&(b=c.clientWidth,p=c.clientHeight);const y=p/e,f=y*t,I=D(n,o);let k=0;return r.forEach((C,W)=>{const w=C.length*I,S=new l({tagName:"div",text:C,attributes:{"data-index":W.toString(),"data-value":C}});S.getNode().style.width=`${w}px`,S.getNode().style.height=`${y}px`,S.getNode().style.backgroundImage=`url(${s})`,S.getNode().style.backgroundSize=`${b}px ${p}px`,S.getNode().style.backgroundPosition=`-${k}px ${-f}px`,d.push(S.getNode()),k+=w}),d}function D(n,a){const e=a.getNode(),t=n.split(" ").reduce((s,o)=>s+o.length,0);return Math.floor(e.clientWidth-2)/t}function nt(n,a,e,t,s,o,r,d){n.forEach(c=>{rt(c,o),at(c,n,a,e,t,s,r,d)})}function at(n,a,e,t,s,o,r,d){n.addEventListener("click",()=>{var C,W,w;let c=!1;const b=(C=r.getNode().lastChild)==null?void 0:C.lastChild,p=(W=r.getNode().lastChild)==null?void 0:W.firstChild,y=(w=r.getNode().firstChild)==null?void 0:w.firstChild,f=document.querySelector(`.${t}`),I=Array.from(e.getNode().querySelectorAll(`.${s}`))[o],k=Array.from(I.querySelectorAll('div[bg-image-disabled="true"]'));n.parentElement&&n.parentElement.className===t?(n.remove(),I.append(n),(f==null?void 0:f.children.length)===0&&(p.removeAttribute("disabled"),y.setAttribute("disabled","disabled"),c=O(I),c&&r.getNode().lastChild!==null&&(it(d,b,p,n,k,o),I.setAttribute("disabled","true")))):n.parentElement&&n.parentElement.className===s&&(n.remove(),f&&f.append(n),n.classList.remove(`${h.wrongOrder}`)),lt(c,f,b,p,a)})}function it(n,a,e,t,s,o){n.correctlyAssembledSentences+=1,n.correctlyAssembledSentences===n.sentencesForRound.length&&n.revealImage(),dt(a,e),n.displayTranslation(),n.translationWrap.getNode().setAttribute("data-active","true"),ot(t,s),s.forEach(r=>r.setAttribute("disabled","true")),n.guessedSentences.push(o)}function ot(n,a){n.getAttribute("bg-image-disabled")&&(n.removeAttribute("bg-image-disabled"),a.forEach(e=>{e.removeAttribute("bg-image-disabled")}))}function rt(n,a){n.addEventListener("mousedown",()=>{n.classList.add(a)}),n.addEventListener("mouseup",()=>{setTimeout(()=>{n.classList.remove(a)},100)})}function lt(n,a,e,t,s){(n===!1||(a==null?void 0:a.children.length)!==0)&&(e.setAttribute("disabled","disabled"),e.setAttribute("invisible","true"),t.removeAttribute("invisible")),(n===!0||(a==null?void 0:a.children.length))!==0&&(t.setAttribute("disabled","disabled"),s.forEach(o=>{o.classList.remove(`${h.wrongOrder}`)}))}function dt(n,a){n.removeAttribute("disabled"),n.removeAttribute("invisible"),a.setAttribute("invisible","true")}function O(n){let a=!1,e;return n.children&&(e=Array.from(n.children).map(t=>Number(t.getAttribute("data-index")))),e&&(a=e.every((t,s)=>t===s)),a}function ct(n){Array.from(n.children).forEach((e,t)=>{t!==Number(e.getAttribute("data-index"))&&e.classList.add(`${h.wrongOrder}`)})}const ut="_game-buttons-block_1as5n_1",mt="_check-button-wrap_1as5n_17",gt="_complete-button-wrap_1as5n_19",ht="_button_1as5n_37",v={"game-buttons-block":"_game-buttons-block_1as5n_1",gameButtonsBlock:ut,"check-button-wrap":"_check-button-wrap_1as5n_17",checkButtonWrap:mt,"complete-button-wrap":"_complete-button-wrap_1as5n_19",completeButtonWrap:gt,button:ht};class pt extends l{constructor(e,t){super({tagName:"div",classNames:[v.gameButtonsBlock]});i(this,"checkButton");i(this,"continueButton");i(this,"autoCompleteButton");i(this,"resultsButton");i(this,"checkButtonWrap");i(this,"completeButtonWrap");i(this,"gamePageInstance");i(this,"modal");this.modal=t,this.gamePageInstance=e,this.completeButtonWrap=new l({tagName:"div",classNames:[v.completeButtonWrap]}),this.append(this.completeButtonWrap),this.checkButtonWrap=new l({tagName:"div",classNames:[v.checkButtonWrap]}),this.append(this.checkButtonWrap),this.autoCompleteButton=new l({tagName:"button",classNames:[v.button,v.autoCompleteButton],text:"Auto-complete",attributes:{type:"button"}}),this.completeButtonWrap.append(this.autoCompleteButton),this.resultsButton=new l({tagName:"button",classNames:[v.button,v.resultButton],text:"Results",attributes:{type:"button",disabled:!0,invisible:"true"}}),this.completeButtonWrap.append(this.resultsButton),this.checkButton=new l({tagName:"button",text:"Check",classNames:[v.button,v.checkButton],attributes:{type:"button",disabled:!0}}),this.checkButtonWrap.append(this.checkButton),this.continueButton=new l({tagName:"button",classNames:[v.button],text:"Continue",attributes:{type:"button",disabled:!0,invisible:"true"}}),this.checkButtonWrap.append(this.continueButton),this.addEventListeners()}addEventListeners(){this.checkButton.getNode().addEventListener("click",this.handleCheckButtonClick.bind(this)),this.continueButton.getNode().addEventListener("click",this.handleContinueButtonClick.bind(this)),this.autoCompleteButton.getNode().addEventListener("click",this.handleAutoCompleteButtonClick.bind(this)),this.resultsButton.getNode().addEventListener("click",this.handleResultButtonClick.bind(this))}handleCheckButtonClick(){this.autoCompleteButton.removeAttribute("disabled");const e=this.gamePageInstance.currentSentenceIndex,t=Array.from(this.gamePageInstance.gameWrap.getNode().children)[e];ct(t)}handleContinueButtonClick(){var e,t;this.hideResultModal(),this.gamePageInstance.correctlyAssembledSentences===this.gamePageInstance.sentencesForRound.length?this.gamePageInstance.proceedToNextRound():this.gamePageInstance.proceedToTheNextSentence(),this.gamePageInstance.currentSentenceIndex<this.gamePageInstance.sentencesForRound.length&&(this.continueButton.setAttribute("disabled","disabled"),this.continueButton.setAttribute("invisible","true"),this.checkButton.setAttribute("disabled","disabled"),this.checkButton.removeAttribute("invisible"),this.autoCompleteButton.removeAttribute("disabled"),this.gamePageInstance.displaySentence(),this.gamePageInstance.isTranslateEnabled=this.gamePageInstance.checkIsTranslateEnabled(),this.gamePageInstance.isTranslateEnabled?this.gamePageInstance.displayTranslation():this.gamePageInstance.translationWrap.getNode().removeAttribute("data-active"),this.gamePageInstance.isBgImageHintEnabled=this.gamePageInstance.checkIsBgImageHintEnabled(),this.gamePageInstance.isBgImageHintEnabled?((e=this.gamePageInstance.header.getNode().querySelector("#bgImageHint"))==null||e.setAttribute("active-hint","true"),this.gamePageInstance.gameWrap.getNode().removeAttribute("bg-image-disabled"),Array.from(this.gamePageInstance.gameSourceDataBlock.getNode().children).forEach(s=>{s.removeAttribute("bg-image-disabled")})):((t=this.gamePageInstance.header.getNode().querySelector("#bgImageHint"))==null||t.removeAttribute("active-hint"),this.gamePageInstance.gameWrap.getNode().setAttribute("bg-image-disabled","true"),Array.from(this.gamePageInstance.gameSourceDataBlock.getNode().children).forEach(s=>{s.setAttribute("bg-image-disabled","true")})))}handleAutoCompleteButtonClick(){this.autoCompleteButton.setAttribute("disabled","disabled"),this.gamePageInstance.autoCompleteSentence()}handleResultButtonClick(){var e;this.resultsButton.setAttribute("disabled","disabled"),(e=this.gamePageInstance.getNode().querySelector("#modal"))==null||e.setAttribute("modal-active","true"),this.modal.createResultItems()}hideResultModal(){var e,t;(e=this.gamePageInstance.getNode().querySelector("#modal"))!=null&&e.getAttribute("modal-active")&&((t=this.gamePageInstance.getNode().querySelector("#modal"))==null||t.removeAttribute("modal-active"))}}const R=""+new URL("bg-DPnWjdPh.jpg",import.meta.url).href,_t="_modal_g0r69_1",bt="_modal-content_g0r69_41",ft="_modal-title_g0r69_95",Nt="_modal-figure_g0r69_101",vt="_modal-image-wrap_g0r69_115",It="_modal-image_g0r69_115",Ct="_modal-image-description_g0r69_135",yt="_modal-results-wrap_g0r69_139",kt="_modal-guessed-results_g0r69_149",St="_modal-skipped-results_g0r69_155",At="_skipped-items-wrap_g0r69_161",Bt="_guessed-items-wrap_g0r69_165",wt="_modal-skipped-title_g0r69_169",xt="_modal-guessed-title_g0r69_171",Lt="_guessed-count_g0r69_205",Wt="_skipped-count_g0r69_207",Rt="_modal-result-item_g0r69_241",Tt="_modal-item-text_g0r69_257",Et="_modal-item-audio_g0r69_265",Pt="_shake_g0r69_1",g={modal:_t,"modal-content":"_modal-content_g0r69_41",modalContent:bt,"modal-title":"_modal-title_g0r69_95",modalTitle:ft,"modal-figure":"_modal-figure_g0r69_101",modalFigure:Nt,"modal-image-wrap":"_modal-image-wrap_g0r69_115",modalImageWrap:vt,"modal-image":"_modal-image_g0r69_115",modalImage:It,"modal-image-description":"_modal-image-description_g0r69_135",modalImageDescription:Ct,"modal-results-wrap":"_modal-results-wrap_g0r69_139",modalResultsWrap:yt,"modal-guessed-results":"_modal-guessed-results_g0r69_149",modalGuessedResults:kt,"modal-skipped-results":"_modal-skipped-results_g0r69_155",modalSkippedResults:St,"skipped-items-wrap":"_skipped-items-wrap_g0r69_161",skippedItemsWrap:At,"guessed-items-wrap":"_guessed-items-wrap_g0r69_165",guessedItemsWrap:Bt,"modal-skipped-title":"_modal-skipped-title_g0r69_169",modalSkippedTitle:wt,"modal-guessed-title":"_modal-guessed-title_g0r69_171",modalGuessedTitle:xt,"guessed-count":"_guessed-count_g0r69_205",guessedCount:Lt,"skipped-count":"_skipped-count_g0r69_207",skippedCount:Wt,"modal-result-item":"_modal-result-item_g0r69_241",modalResultItem:Rt,"modal-item-text":"_modal-item-text_g0r69_257",modalItemText:Tt,"modal-item-audio":"_modal-item-audio_g0r69_265",modalItemAudio:Et,shake:Pt};class Ft extends l{constructor(e){super({tagName:"div",classNames:[g.modal],attributes:{id:"modal"}});i(this,"modalContent");i(this,"modalFigure");i(this,"modalImageWrap");i(this,"modalImageDescription");i(this,"modalImage");i(this,"modalResultsWrap");i(this,"modalGuessedResults");i(this,"modalGuessedTitle");i(this,"skippedItemsWrap");i(this,"guessedItemsWrap");i(this,"modalSkippedResults");i(this,"modalSkippedTitle");i(this,"skippedCount");i(this,"guessedCount");i(this,"gameInstance");i(this,"audioContext",new AudioContext);i(this,"audio",null);this.gameInstance=e,this.modalContent=new l({tagName:"div",classNames:[g.modalContent]}),this.modalFigure=new l({tagName:"figure",classNames:[g.modalFigure]}),this.modalImageWrap=new l({tagName:"div",classNames:[g.modalImageWrap]}),this.modalImage=new l({tagName:"img",classNames:[g.modalImage]}),this.modalImageDescription=new l({tagName:"figcaption",classNames:[g.modalImageDescription]}),this.modalResultsWrap=new l({tagName:"div",classNames:[g.modalResultsWrap]}),this.modalGuessedResults=new l({tagName:"div",classNames:[g.modalGuessedResults],attributes:{id:"guessed"}}),this.modalGuessedTitle=new l({tagName:"h2",classNames:[g.modalGuessedTitle]}),this.skippedItemsWrap=new l({tagName:"div",classNames:[g.skippedItemsWrap]}),this.modalSkippedResults=new l({tagName:"div",classNames:[g.modalSkippedResults],attributes:{id:"skipped"}}),this.modalSkippedTitle=new l({tagName:"h2",classNames:[g.modalSkippedTitle]}),this.guessedItemsWrap=new l({tagName:"div",classNames:[g.guessedItemsWrap]}),this.skippedCount=new l({tagName:"span",classNames:[g.skippedCount]}),this.guessedCount=new l({tagName:"span",classNames:[g.guessedCount]}),this.createTemplate()}createTemplate(){this.append(this.modalContent),this.modalContent.append(this.modalFigure),this.modalFigure.append(this.modalImageWrap),this.modalImageWrap.append(this.modalImage),this.modalImage.setAttribute("alt","completed round image"),this.modalImage.setAttribute("id","modalCutImage"),this.modalFigure.append(this.modalImageDescription),this.modalContent.append(this.modalResultsWrap),this.modalResultsWrap.append(this.modalGuessedResults),this.modalGuessedResults.append(this.modalGuessedTitle),this.modalGuessedResults.append(this.guessedItemsWrap),this.modalGuessedTitle.setTextContent("Personally assembled sentences"),this.modalGuessedTitle.append(this.guessedCount),this.modalResultsWrap.append(this.modalSkippedResults),this.modalSkippedResults.append(this.modalSkippedTitle),this.modalSkippedResults.append(this.skippedItemsWrap),this.modalSkippedTitle.setTextContent("Assembled using Auto-complete button"),this.modalSkippedTitle.append(this.skippedCount)}createResultItemTemplate(e,t,s){this.setImageInformation();const o=new l({tagName:"div",classNames:[g.modalResultItem]}),r=new l({tagName:"p",classNames:[g.modalItemText]}),d=new l({tagName:"button",classNames:[g.modalItemAudio],attributes:{type:"button",id:`i_${e}`}});o.append(d),o.append(r),r.setTextContent(`${t[e]}`),s.append(o.getNode()),d.getNode().addEventListener("click",()=>{this.playAudioForIndex(e),d.getNode().setAttribute("isPlaying","true"),this.getNode().querySelectorAll(`.${g.modalItemAudio}`).forEach(c=>{c.setAttribute("disabled","true")}),setTimeout(()=>{d.getNode().removeAttribute("isPlaying"),this.getNode().querySelectorAll(`.${g.modalItemAudio}`).forEach(c=>{c.removeAttribute("disabled")})},2e3)})}async playAudioForIndex(e){var s,o,r;const t=(r=(o=(s=this.gameInstance.fetchedWordData)==null?void 0:s.rounds[this.gameInstance.currentRound])==null?void 0:o.words[e])==null?void 0:r.audioExample;if(t)try{const d=await P(t,this.audioContext),c=this.audioContext.createBufferSource();c.buffer=d,c.connect(this.audioContext.destination),c.start(this.audioContext.currentTime)}catch(d){console.error("Error playing audio:",d)}}setImageInformation(){if(this.gameInstance.fetchedWordData){const{year:e}=this.gameInstance.fetchedWordData.rounds[this.gameInstance.currentRound].levelData,{author:t}=this.gameInstance.fetchedWordData.rounds[this.gameInstance.currentRound].levelData,{name:s}=this.gameInstance.fetchedWordData.rounds[this.gameInstance.currentRound].levelData,o=`${t} - ${s} (${e})`;this.modalImageDescription.setTextContent(`${o}`)}}createResultItems(){this.guessedItemsWrap.getNode().innerHTML="",this.skippedItemsWrap.getNode().innerHTML="",this.guessedCount.getNode().innerHTML=`${this.gameInstance.guessedSentences.length}`,this.skippedCount.getNode().innerHTML=`${this.gameInstance.autoCompletedSentences.length}`,this.gameInstance.guessedSentences.forEach(e=>{this.createResultItemTemplate(e,this.gameInstance.sentencesForRound,this.guessedItemsWrap.getNode())}),this.gameInstance.autoCompletedSentences.forEach(e=>{this.createResultItemTemplate(e,this.gameInstance.sentencesForRound,this.skippedItemsWrap.getNode())})}}class H extends l{constructor(){super({tagName:"div",classNames:[h.gamePageBg]});i(this,"gamePageContainer");i(this,"mainHeader");i(this,"header");i(this,"mainContent");i(this,"gameWrap");i(this,"gameSourceDataBlock");i(this,"gameButtonsBlock");i(this,"footer");i(this,"fetchedWordData",null);i(this,"currentLevel",1);i(this,"currentRound",0);i(this,"totalRoundsCount",0);i(this,"sentencesForRound",[]);i(this,"currentSentenceIndex",0);i(this,"currentSentenceCards");i(this,"currentSentence");i(this,"audioExample");i(this,"translationWrap");i(this,"imageSource","");i(this,"cutSrc","");i(this,"imageUrl","");i(this,"isTranslateEnabled",!0);i(this,"isPronounceEnabled",!0);i(this,"isBgImageHintEnabled",!0);i(this,"correctlyAssembledSentences");i(this,"guessedSentences",[]);i(this,"autoCompletedSentences",[]);i(this,"modalResultElement");this.modalResultElement=new Ft(this),this.currentSentenceCards=[],this.currentSentence="",this.correctlyAssembledSentences=0,this.isTranslateEnabled=this.checkIsTranslateEnabled(),this.isPronounceEnabled=this.checkIsPronounceEnabled(),this.isBgImageHintEnabled=this.checkIsBgImageHintEnabled(),this.setBackground(),this.gamePageContainer=new l({tagName:"div",classNames:[h.gamePageContainer]}),this.append(this.gamePageContainer),this.mainHeader=new $,this.gamePageContainer.append(this.mainHeader),this.mainHeader.getNode().style.background="rgba(3, 6, 25, 0.7)",this.hideUserGreetingElement(),this.mainContent=new l({tagName:"main",classNames:[h.mainContentWrapper]}),this.gamePageContainer.append(this.mainContent),this.header=new Ge(this),this.mainContent.append(this.header),this.translationWrap=new l({tagName:"div",classNames:[h.translationWrap]}),this.mainContent.append(this.translationWrap),this.gameWrap=new l({tagName:"div",classNames:[h.gameWrap]}),this.mainContent.append(this.gameWrap),this.gameSourceDataBlock=new l({tagName:"div",classNames:[h.gameSourceDataBlock]}),this.mainContent.append(this.gameSourceDataBlock),this.gameButtonsBlock=new pt(this,this.modalResultElement),this.mainContent.append(this.gameButtonsBlock),this.footer=new F,this.gamePageContainer.append(this.footer),this.fetchWordData(),this.addEventListenerForResize(),this.mainContent.append(this.modalResultElement)}addEventListenerForResize(){window.addEventListener("resize",()=>{this.currentSentenceCards.length&&this.setCardsWidth(this.currentSentenceCards)})}hideUserGreetingElement(){const e=this.mainHeader.getNode().querySelector("#userGreeting");e&&(e.style.display="none")}setBackground(){this.getNode().style.backgroundImage=`url(${R})`,this.getNode().style.backgroundRepeat="no-repeat",this.getNode().style.backgroundPosition="center",this.getNode().style.backgroundSize="100% 100%"}addLinesForSentence(){for(let e=1;e<=this.sentencesForRound.length;e+=1){const t=document.createElement("div");t.classList.add(h.sentenceLine),this.gameWrap.getNode().appendChild(t)}}fetchWordData(){E(this.currentLevel).then(e=>{this.fetchedWordData=e,this.handleFetchedData(),this.displaySentence(),this.getImageForRound(),this.addLinesForSentence(),this.createElementsForRound(),this.setTitleForRoundOption()}).catch(e=>{console.error("Error fetching data:",e)})}handleFetchedData(){var e,t,s,o,r,d,c;this.fetchedWordData&&(this.sentencesForRound=this.fetchedWordData.rounds[this.currentRound].words.map(b=>b.textExample),this.audioExample=(s=(t=(e=this.fetchedWordData)==null?void 0:e.rounds[this.currentRound])==null?void 0:t.words[this.currentSentenceIndex])==null?void 0:s.audioExample,this.imageSource=this.fetchedWordData.rounds[this.currentRound].levelData.imageSrc,this.cutSrc=this.fetchedWordData.rounds[this.currentRound].levelData.cutSrc,this.totalRoundsCount=this.fetchedWordData.roundsCount,this.isTranslateEnabled&&(this.translationWrap.getNode().setAttribute("data-active","true"),(o=this.header.getNode().querySelector("#translateHint"))==null||o.setAttribute("active-hint","true"),this.displayTranslation()),this.isPronounceEnabled?((r=this.header.getNode().querySelector("#playSoundButton"))==null||r.removeAttribute("disabled"),(d=this.header.getNode().querySelector("#pronunciationHint"))==null||d.setAttribute("active-hint","true")):(c=this.header.getNode().querySelector("#playSoundButton"))==null||c.setAttribute("disabled","true"))}displaySentence(){var s,o;this.currentSentenceCards.length=0,this.gameSourceDataBlock.getNode().innerHTML="",this.currentSentence=this.sentencesForRound[this.currentSentenceIndex];const e=st(this.currentSentence,h.gameWrap,this.sentencesForRound.length,this.currentSentenceIndex,this.imageUrl,this.gameSourceDataBlock);this.setCardsWidth(e);const t=tt(e);t.forEach(r=>{r.classList.add(h.wordCard),t.forEach((d,c)=>{this.delayVisibility(d,c)}),this.gameSourceDataBlock.getNode().append(r)}),this.addClickHandlersToWordCards(e),this.currentSentenceCards.push(...e),this.isBgImageHintEnabled?((s=this.header.getNode().querySelector("#bgImageHint"))==null||s.setAttribute("active-hint","true"),this.gameWrap.getNode().removeAttribute("bg-image-disabled"),Array.from(this.gameSourceDataBlock.getNode().children).forEach(r=>{r.removeAttribute("bg-image-disabled")})):((o=this.header.getNode().querySelector("#bgImageHint"))==null||o.removeAttribute("active-hint"),this.gameWrap.getNode().setAttribute("bg-image-disabled","true"),Array.from(this.gameSourceDataBlock.getNode().children).forEach(r=>{r.setAttribute("bg-image-disabled","true")}))}delayVisibility(e,t){setTimeout(()=>{e.style.visibility="visible",e.style.opacity="1"},(t+1)*100)}checkIsTranslateEnabled(){return A("userData","translateEnabled")===!0}checkIsPronounceEnabled(){return A("userData","pronounceEnabled")===!0}checkIsBgImageHintEnabled(){return A("userData","bgImageHintEnabled")===!0}displayTranslation(){var t;const e=(t=this.fetchedWordData)==null?void 0:t.rounds[this.currentRound].words[this.currentSentenceIndex].textExampleTranslate;this.translationWrap.setTextContent(`${e}`),this.translationWrap.getNode().setAttribute("data-active","true")}addClickHandlersToWordCards(e){nt(e,this.gameWrap,`${h.gameSourceDataBlock}`,`${h.sentenceLine}`,this.currentSentenceIndex,`${h.selected}`,this.gameButtonsBlock,this)}setCardsWidth(e){var r;const t=this.sentencesForRound[this.currentSentenceIndex],s=this.gameSourceDataBlock,o=D(t,s);for(let d=0;d<e.length;d+=1){const c=((r=e[d].textContent)==null?void 0:r.length)??0;e[d].style.width=`${c*o}px`}}autoCompleteSentence(){var y,f,I,k;this.autoCompletedSentences.push(this.currentSentenceIndex);const e=this.gameWrap.getNode().children[this.currentSentenceIndex],t=Array.from(this.gameSourceDataBlock.getNode().children),s=Array.from(e.children),o=this.currentSentenceCards,r=(y=this.gameButtonsBlock.getNode().firstChild)==null?void 0:y.firstChild,d=(f=this.gameButtonsBlock.getNode().firstChild)==null?void 0:f.lastChild,c=(I=this.gameButtonsBlock.getNode().lastChild)==null?void 0:I.lastChild,b=(k=this.gameButtonsBlock.getNode().lastChild)==null?void 0:k.firstChild,p=O(e);t.length?(this.handleCorrectOrder(o,s,t,e),e.setAttribute("disable","true"),this.translationWrap.getNode().setAttribute("data-active","true"),this.displayTranslation()):p||this.handleWrongOrder(o,s),e.setAttribute("disable","true"),this.correctlyAssembledSentences+=1,this.correctlyAssembledSentences===this.sentencesForRound.length?(this.revealImage(),this.toggleCompleteResultButtons(d,r,c,b)):this.toggleContinueCkeckButtons(c,b),s.forEach(C=>{C.setAttribute("disable","true")})}handleWrongOrder(e,t){e.forEach((s,o)=>{t.forEach(r=>{r.classList.remove(`${h.wrongOrder}`),r.getAttribute("data-index")===o.toString()&&r.getAttribute("data-value")===s.getAttribute("data-value")&&(r.style.order=`${o}`,r.style.transition="order 5s",r.getAttribute("bg-image-disabled")&&r.removeAttribute("bg-image-disabled"))})})}handleCorrectOrder(e,t,s,o){s.forEach((r,d)=>{r.style.visibility="hidden",r.style.opacity="0",setTimeout(()=>{r.remove(),o.append(r),t.push(r),r.style.visibility="visible",r.style.opacity="1",e.forEach((c,b)=>{t.forEach(p=>{p.getAttribute("data-index")===b.toString()&&p.getAttribute("data-value")===c.getAttribute("data-value")&&(p.style.order=`${b}`,p.style.transition="order 5s",p.getAttribute("bg-image-disabled")&&p.removeAttribute("bg-image-disabled"),p.setAttribute("disabled","true"))})})},(d+1)*100)}),o.setAttribute("disabled","true")}toggleContinueCkeckButtons(e,t){setTimeout(()=>{e.removeAttribute("disabled"),e.removeAttribute("invisible"),t.setAttribute("invisible","true")},1e3)}toggleCompleteResultButtons(e,t,s,o){setTimeout(()=>{s.removeAttribute("disabled"),s.removeAttribute("invisible"),o.setAttribute("invisible","true"),o.setAttribute("disabled","true"),e.removeAttribute("disabled"),e.removeAttribute("invisible"),t.setAttribute("invisible","true")},1e3)}disableResultButton(){setTimeout(()=>{var s,o;const e=(s=this.gameButtonsBlock.getNode().firstChild)==null?void 0:s.lastChild,t=(o=this.gameButtonsBlock.getNode().firstChild)==null?void 0:o.firstChild;e.setAttribute("disabled","true"),e.setAttribute("invisible","true"),t.removeAttribute("invisible"),t.removeAttribute("disabled")},1e3)}async getImageForRound(){try{const e=await J(this.imageSource);this.gameWrap.getNode().style.backgroundImage=`url(${e.src})`,Array.from(this.gameSourceDataBlock.getNode().children).forEach(o=>{o.style.backgroundImage=`url(${e.src})`}),this.imageUrl=`url(${e.src})`;const s=this.modalResultElement.getNode().querySelector("#modalCutImage");s.src=`https://raw.githubusercontent.com/rolling-scopes-school/rss-puzzle-data/main/images/${this.cutSrc}`}catch(e){console.error("Error fetching image:",e)}}revealImage(){setTimeout(()=>{Array.from(this.getNode().querySelectorAll(`.${h.wordCard}`)).forEach(e=>{e.setAttribute("bg-revealed","true")}),this.gameWrap.getNode().setAttribute("bg-revealed","true"),this.gameWrap.getNode().removeAttribute("bg-image-disabled"),this.translationWrap.getNode().removeAttribute("data-active"),this.displayImageInformation()},1e3)}displayImageInformation(){if(this.fetchedWordData){const{year:e}=this.fetchedWordData.rounds[this.currentRound].levelData,{author:t}=this.fetchedWordData.rounds[this.currentRound].levelData,{name:s}=this.fetchedWordData.rounds[this.currentRound].levelData,o=`${t} - ${s} (${e})`;this.gameSourceDataBlock.getNode().innerHTML=`${o}`}}proceedToNextRound(){this.gameWrap.getNode().removeAttribute("bg-revealed"),this.gameWrap.getNode().innerHTML="",this.addLinesForSentence(),this.correctlyAssembledSentences=0,this.currentSentenceIndex=0,this.sentencesForRound.length=0,this.currentSentenceCards.length=0,this.guessedSentences.length=0,this.autoCompletedSentences.length=0,this.disableResultButton(),this.currentRound<this.totalRoundsCount?(this.currentRound+=1,this.handleFetchedData(),this.displaySentence(),this.getImageForRound(),this.setTitleForRoundOption()):(this.currentRound=0,this.currentLevel+=1,this.handleFetchedData(),this.displaySentence(),this.getImageForRound(),this.setTitleForRoundOption())}proceedToTheNextSentence(){var e,t,s;this.currentSentenceIndex+=1,this.audioExample=(s=(t=(e=this.fetchedWordData)==null?void 0:e.rounds[this.currentRound])==null?void 0:t.words[this.currentSentenceIndex])==null?void 0:s.audioExample,this.getImageForRound()}createElementsForRound(){const e=this.totalRoundsCount,t=this.header.getNode().querySelector("#selectRoundBody");t.innerHTML="";const s=this.header.getNode().querySelector("#selectRoundTitle");s.textContent=`Round ${this.currentRound+1}`;for(let o=1;o<=e;o+=1){const r=document.createElement("div");r.classList.add(`${h.roundItem}`),r.setAttribute("data-class","roundItem"),r.textContent=`Round ${o}`,t.appendChild(r)}}setTitleForRoundOption(){const e=this.header.getNode().querySelector("#selectRoundTitle");e.textContent=`Round ${this.currentRound+1}`}}const $t="_start-screen_1vsw2_1",Dt="_main-content-wrapper_1vsw2_17",Ot="_game-description_1vsw2_53",Ht="_start-btn_1vsw2_61",L={"start-screen":"_start-screen_1vsw2_1",startScreen:$t,"main-content-wrapper":"_main-content-wrapper_1vsw2_17",mainContentWrapper:Dt,"game-description":"_game-description_1vsw2_53",gameDescription:Ot,"start-btn":"_start-btn_1vsw2_61",startBtn:Ht};class z extends l{constructor(){super({tagName:"div",classNames:[L.startScreen]});i(this,"header");i(this,"footer");i(this,"mainContent");i(this,"appName");i(this,"gameDescription");i(this,"startButton");this.setBackground(),this.header=new $,this.append(this.header),this.mainContent=new l({tagName:"div",classNames:[L.mainContentWrapper]}),this.append(this.mainContent),this.appName=new l({tagName:"h1",text:"RSS English Puzzle Game",classNames:[L.appTitle]}),this.mainContent.append(this.appName),this.gameDescription=new l({tagName:"p",text:"Puzzle is an interactive mini-game aimed at enhancing English language skills. Players assemble sentences from jumbled words. The game integrates various levels of difficulty, hint options, and a unique puzzle-like experience with artwork.",classNames:[L.gameDescription]}),this.mainContent.append(this.gameDescription),this.startButton=new l({tagName:"button",text:"Start",classNames:[L.startBtn]}),this.mainContent.append(this.startButton),this.startButton.getNode().addEventListener("click",this.handleStartClick.bind(this)),this.footer=new F,this.append(this.footer)}handleStartClick(){document.body.firstChild&&document.body.removeChild(document.body.firstChild),document.body.prepend(new H().getNode())}setBackground(){this.getNode().style.backgroundImage=`url(${R})`,this.getNode().style.backgroundSize="cover",this.getNode().style.backgroundRepeat="no-repeat",this.getNode().style.backgroundPosition="center"}}const zt="_login-form-wrapper_1xdak_1",Gt="_login-form_1xdak_1",Mt="_login-form-title_1xdak_63",qt="_login-form-input_1xdak_81",Vt="_surname-input_1xdak_107",Ut="_login-form-label_1xdak_115",jt="_input-tooltip_1xdak_143",Jt="_input-tooltip-active_1xdak_199",Zt="_button_1xdak_209",u={"login-form-wrapper":"_login-form-wrapper_1xdak_1",loginFormWrapper:zt,"login-form":"_login-form_1xdak_1",loginForm:Gt,"login-form-title":"_login-form-title_1xdak_63",loginFormTitle:Mt,"login-form-input":"_login-form-input_1xdak_81",loginFormInput:qt,"surname-input":"_surname-input_1xdak_107",surnameInput:Vt,"login-form-label":"_login-form-label_1xdak_115",loginFormLabel:Ut,"input-tooltip":"_input-tooltip_1xdak_143",inputTooltip:jt,"input-tooltip-active":"_input-tooltip-active_1xdak_199",inputTooltipActive:Jt,button:Zt};class G extends l{constructor(){super({tagName:"div",classNames:[u.loginFormWrapper]});i(this,"form");i(this,"firstNameInput");i(this,"surnameInput");i(this,"loginButton");i(this,"firstNameLabel");i(this,"surnameLabel");i(this,"firstNameTooltip");i(this,"surnameTooltip");i(this,"formTitle");this.form=new l({tagName:"form",classNames:[u.loginForm]}),this.append(this.form),this.formTitle=new l({tagName:"h2",classNames:[u.loginFormTitle],text:"login"}),this.surnameTooltip=new l({tagName:"span"}),this.firstNameTooltip=new l({tagName:"span"}),this.firstNameInput=new l({tagName:"input"}),this.surnameInput=new l({tagName:"input"}),this.firstNameLabel=new l({tagName:"label",text:"First Name",classNames:[u.loginFormLabel,u.firstNameLabel],attributes:{for:"fname"}}),this.surnameLabel=new l({tagName:"label",text:"Last Name",classNames:[u.loginFormLabel,u.surnameLabel],attributes:{for:"sname"}}),this.loginButton=new l({tagName:"button",classNames:[u.button,u.loginBtn],text:"Login",attributes:{type:"submit",disabled:!0}}),this.setFormElements(),this.setEventListenerToForm(),this.setInputsProperties(),this.setInputClass(),this.setBackground()}setEventListenerToForm(){this.firstNameInput.getNode().addEventListener("input",this.checkFormValidity.bind(this)),this.surnameInput.getNode().addEventListener("input",this.checkFormValidity.bind(this)),this.form.getNode().addEventListener("submit",e=>{e.preventDefault(),this.handleFormSubmit()})}setInputsProperties(){this.surnameTooltip.getNode().classList.add(u.inputTooltip,u.inputTooltipSurname),this.firstNameTooltip.getNode().classList.add(u.inputTooltip,u.inputTooltipName),this.firstNameInput.getNode().setAttribute("type","text"),this.firstNameInput.getNode().setAttribute("required","true"),this.firstNameInput.getNode().setAttribute("name","fname"),this.firstNameInput.getNode().setAttribute("id","fname"),this.firstNameInput.getNode().setAttribute("placeholder","First Name"),this.firstNameInput.getNode().setAttribute("minlength","3"),this.surnameInput.getNode().setAttribute("type","text"),this.surnameInput.getNode().setAttribute("required","true"),this.surnameInput.getNode().setAttribute("name","sname"),this.surnameInput.getNode().setAttribute("id","sname"),this.surnameInput.getNode().setAttribute("placeholder","Surname"),this.surnameInput.getNode().setAttribute("minlength","4")}setInputClass(){this.firstNameInput.getNode().classList.add(u.loginFormInput,u.firstNameInput),this.surnameInput.getNode().classList.add(u.loginFormInput,u.surnameInput)}setFormElements(){this.form.prepend(this.formTitle),this.form.append(this.firstNameLabel),this.firstNameLabel.append(this.firstNameTooltip),this.form.append(this.firstNameInput),this.form.append(this.surnameLabel),this.surnameLabel.append(this.surnameTooltip),this.form.append(this.surnameInput),this.form.append(this.loginButton)}handleFormSubmit(){const e=this.getFirstName(),t=this.getSurname();V(e,t,!0),this.destroy(),document.body.prepend(new z().getNode())}getFirstName(){return this.firstNameInput.getNode().value}getSurname(){return this.surnameInput.getNode().value}checkFormValidity(){const e=this.firstNameInput.getNode().value.trim(),t=this.surnameInput.getNode().value.trim(),s=parseInt(this.firstNameInput.getNode().getAttribute("minlength")||"0",10),o=parseInt(this.surnameInput.getNode().getAttribute("minlength")||"0",10),r=this.checkValidity(e,this.firstNameTooltip.getNode(),s),d=this.checkValidity(t,this.surnameTooltip.getNode(),o);this.loginButton.getNode().disabled=!(r&&d)}checkValidity(e,t,s){return e===""||e.length<s?(t.textContent=e===""?"This field is required":`Minimum ${s} characters required`,t.classList.add(u.inputTooltipActive),!1):/^[A-Za-z-]+$/.test(e)?e[0]==="-"&&e[1]!==e[1].toUpperCase()||e[0]!=="-"&&e[0]!==e[0].toUpperCase()?(t.textContent=e[0]==="-"?"First letter after hyphen should be uppercase":"First letter should be uppercase",t.classList.add(u.inputTooltipActive),!1):e[0]==="-"&&e.slice(2)!==e.slice(2).toLowerCase()||e[0]!=="-"&&e.slice(1)!==e.slice(1).toLowerCase()?(t.textContent="ONLY FIRST letter may be uppercase",t.classList.add(u.inputTooltipActive),!1):(t.classList.remove(u.inputTooltipActive),!0):(t.textContent='Only English letters and "-" allowed',t.classList.add(u.inputTooltipActive),!1)}setBackground(){this.getNode().style.backgroundImage=`url(${R})`,this.getNode().style.backgroundSize="100% 100%",this.getNode().style.backgroundRepeat="no-repeat",this.getNode().style.backgroundPosition="center"}}document.addEventListener("DOMContentLoaded",()=>{const n=j(),a=localStorage.getItem("isPlaying"),e=a?JSON.parse(a):!1;n&&e?document.body.prepend(new H().getNode()):n?document.body.prepend(new z().getNode()):document.body.prepend(new G().getNode())});console.log(`
**Score: CrossCheck Criteria:  215 / 245 points**
  - [x] User Name Entry Page Evaluation Criteria (Total Points: 20) 
  - [x] Access and Session Management Evaluation Criteria (Total Points: 10) 
  - [x] Start Screen Evaluation Criteria (Total Points: 15) 
  - [x] Basic Game Functionality Evaluation Criteria (Total Points: 50 /80) 
  - [x] Hint Functionality Evaluation Criteria (Total Points: 60) 
  - [x] Completion and Revelation of Background Image Evaluation Criteria (Total Points: 10) 
  - [x] Statistics Page Evaluation Criteria (Total Points: 25 / 25) 
  - [x] Level and Round Selection Evaluation Criteria (Total Points: 25) 

**not implemented yet - 30**

- [ ] Drag-and-Drop Functionality (15 points) (15 points) 
- [ ] Puzzle-Like Word Card Design (15 points) 
`);
